{"version":3,"sources":["webpack:///./src/background.js","webpack:///./src/service/local.js","webpack:///./src/vender/webdav.js","webpack:///./src/service/permission.js","webpack:///./src/service/tips.js","webpack:///./src/vender/puread/puread.min.js"],"names":["queryOptions","active","lastFocusedWindow","chrome","tabs","query","tab","getCurrentTab","msg","ver","menu","watch","WebDAV","permission","tips","console","log","upTabId","storage","Read","puread","PureRead","sites","local","Firstload","Version","version","browser","create","url","runtime","getURL","Count","GetRemote","result","error","pr","Addsites","Writesite","getNewsitesHandler","Fix","read","focus","Write","Verify","simpread","patch","Patch","FixSubver","CreateAll","setTimeout","uninstall","Push","OnClicked","info","tracked","eventCategory","eventAction","eventValue","menuItemId","linkUrl","sendMessage","id","Add","MESSAGE_ACTION","menu_whitelist","pageUrl","menu_exclusion","menu_blacklist","menu_unrdist","menu_lazyload","startsWith","onMessage","addListener","request","sender","sendResponse","type","CORB","$","ajax","value","settings","done","fail","jqXHR","textStatus","errorThrown","jianguo","user","password","method","dav","Fs","dir","root","mkdir","folder","status","file","path","write","content","response","name","download","data","blob","Blob","URL","createObjectURL","downloads","filename","replace","downloadId","base64","fetch","then","Promise","resolve","reject","reader","FileReader","onloadend","uri","event","target","onerror","readAsDataURL","catch","Get","permissions","snapshot","left","top","width","height","captureVisibleTab","format","image","Image","src","onload","canvas","document","createElement","ctx","getContext","dpi","self","devicePixelRatio","sx","sy","sWidth","sHeight","drawImage","toDataURL","shortcuts","getCurTab","browser_action","length","setMenuAndIcon","code","new_tab","close_tab","forEach","remove","option","Create","Remove","updated","save_verify","Lock","auth","toLowerCase","update_site","encodeURI","JSON","stringify","site","save_site","temp_site","auth_success","export","track","speak","tts","speak_stop","stop","tips_norepeat","Done","screenshot","UI","Screenshotter","grab","exportType","onActivated","tab_selected","is_update","onUpdated","tabId","changeInfo","Pull","includes","substr","search","opts","find","redirect_uri","encodeURIComponent","reload","pending_site","onRemoved","action","onClicked","browser_click","callback","filter","icon","Update","setIcon","setUninstallURL","service","onInstalled","details","reason","previousVersion","hasNewVersion","color","text","timed","setBadgeBackgroundColor","setBadgeText","imageDataURL","shared","imageDirtyCutAt","originalScrollTop","title","hasVscrollbar","imageDataURLPartial","parts","match","alert","property","from","to","screenshotBegin","screenshotVisibleArea","quality","dataUrl","push","screenshotScroll","lastError","message","screenshotEnd","screenshotReturn","eventManagerInit","e","recursiveImageMerge","imageDataURLs","images","i","window","j","cut","NAMES","VER","COUNT","FIRST","PATCH","MAX_COUNT","curcount","Local","get","cur","set","firstload","state","key","localStorage","removeItem","GET","PROPFIND","Depth","MKCOL","DELETE","PUT","Author","verb","headers","xhr","XMLHttpRequest","body","b","responseText","xml","responseXML","firstChild","nextSibling","onreadystatechange","readyState","DONE","open","setRequestHeader","btoa","header","send","rootUrl","fs","href","urlFor","nameFor","rm","children","childrenFunc","doc","childNodes","decodeURI","getElementsByTagName","nodeValue","propstat","prop","resourcetype","collection","test","module","exports","contains","granted","Render","plugins","notify","Notify","messages","pushMessage","Help","statistics","cancel","parse","setItem","t","TypeError","r","n","enumerable","configurable","writable","Object","defineProperty","prototype","assign","arguments","hasOwnProperty","call","Function","getOwnPropertyDescriptor","a","getPrototypeOf","o","ReferenceError","Array","isArray","Symbol","iterator","l","next","return","extend","u","protocol","host","hostname","port","pathname","hash","s","h","c","trim","split","d","join","p","f","tagName","parentNode","nodeType","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","m","matching","desc","exclude","include","avatar","paging","v","g","y","w","global","custom","location","endsWith","current","origins","mathjax","each","x","Newsite","outerHTML","dom","k","cls","tag","excerpt","wrap","pop","auto","html","append","is","default","Converter","makeHtml","attr","exp","findIndex","_","Map","person","Safesite","Newmultisite","Readability","Formatsites","concat","keys","map","count","newsites","mode","splice","prev","O","Set","delete","indexOf","lastIndexOf","cloneNode","RegExp","origin","innerHTML","className","S","M","__proto__","org_url","plugin","pure","cleanup","constructor","setPrototypeOf","minimatch","pangu","beautify","stylesheet","style","rdability","markdown","before","cleanHTML","isMathJax","specbeautify","removeSpareTag","htmlbeautify","commbeautify","spacingElementByClassName","dom2Xpath","xPath2Dom"],"mappings":"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","file":"background.js","sourcesContent":["console.log( \"=== simpread background load ===\" )\r\n\r\nimport local       from 'local';\r\nimport { storage } from 'storage';\r\nimport * as msg    from 'message';\r\nimport {browser}   from 'browser';\r\nimport * as ver    from 'version';\r\nimport * as menu   from 'menu';\r\nimport * as watch  from 'watch';\r\nimport * as WebDAV from 'webdav';\r\nimport * as permission\r\n                   from 'permission';\r\nimport * as tips   from 'tips';\r\nimport PureRead    from 'puread';\r\n\r\n// global update site tab id\r\nlet upTabId = -1;\r\n\r\n/**\r\n * Sevice: storage Get data form chrome storage\r\n */\r\nstorage.Read( () => {\r\n    storage.puread = new PureRead( storage.sites );\r\n    if ( local.Firstload() ) {\r\n        local.Version( ver.version );\r\n        browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#firstload?ver=\" + ver.version ) });\r\n    }\r\n    else {\r\n       !local.Count() && storage.GetRemote( \"remote\", ( result, error ) => {\r\n            if ( !error ) {\r\n                storage.pr.Addsites( result );\r\n                storage.Writesite( storage.pr.sites, getNewsitesHandler );\r\n            }\r\n        });\r\n        ver.version != storage.version && storage.GetRemote( \"local\", ( result, error ) => {\r\n            storage.pr.Addsites( result );\r\n            storage.Writesite( storage.pr.sites, () => {\r\n                ver.version != storage.version &&\r\n                storage.Fix( storage.read.sites, storage.version, ver.version, storage.focus.sites );\r\n                ver.version != storage.version && storage.Write( () => {\r\n                        local.Version( ver.version );\r\n                        browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#update?ver=\" + ver.version ) });\r\n                }, ver.Verify( storage.version, storage.simpread ) );\r\n                getNewsitesHandler( result );\r\n            });\r\n        });\r\n        ver.version == storage.version && ver.patch != storage.patch &&\r\n            storage.Write(()=> {\r\n                // when x.x.x.yyyy is silent update\r\n                //browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#update?patch=\" + ver.patch ) });\r\n                //localStorage.setItem( \"simpread-patch-update\", true );\r\n                local.Patch( \"add\", true );\r\n            }, ver.FixSubver( ver.patch, storage.simpread ));\r\n    }\r\n    menu.CreateAll();\r\n    setTimeout( ()=>uninstall(), 100 );\r\n});\r\n\r\n/**\r\n * Get newsites handler\r\n * @param {object} count: update site cou\r\n */\r\nfunction getNewsitesHandler( result ) {\r\n    watch.Push( \"site\", true );\r\n}\r\n\r\n/**\r\n * Listen menu event handler\r\n */\r\nmenu.OnClicked( ( info, tab ) => {\r\n    console.log( \"background contentmenu Listener\", info, tab );\r\n    tracked({ eventCategory: \"menu\", eventAction: \"menu\", eventValue: info.menuItemId });\r\n    if ( info.menuItemId == \"link\" ) {\r\n        info.linkUrl && browser.tabs.create({ url: info.linkUrl + \"?simpread_mode=read\" });\r\n    } else if ( info.menuItemId == \"list\" ) {\r\n        browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#later\" ) });\r\n    } else if ( info.menuItemId == \"whitelist\" ) {\r\n        browser.tabs.sendMessage( tab.id, msg.Add( msg.MESSAGE_ACTION.menu_whitelist, {url: info.pageUrl } ));\r\n    } else if ( info.menuItemId == \"exclusion\" ) {\r\n        browser.tabs.sendMessage( tab.id, msg.Add( msg.MESSAGE_ACTION.menu_exclusion, {url: info.pageUrl } ));\r\n    } else if ( info.menuItemId == \"blacklist\" ) {\r\n        browser.tabs.sendMessage( tab.id, msg.Add( msg.MESSAGE_ACTION.menu_blacklist, {url: info.pageUrl } ));\r\n    } else if ( info.menuItemId == \"unrdist\" ) {\r\n        browser.tabs.sendMessage( tab.id, msg.Add( msg.MESSAGE_ACTION.menu_unrdist, {url: info.pageUrl } ));\r\n    } else if ( info.menuItemId == \"lazyload\" ) {\r\n        browser.tabs.sendMessage( tab.id, msg.Add( msg.MESSAGE_ACTION.menu_lazyload, {url: info.pageUrl } ));\r\n    } else {\r\n        if ( !tab.url.startsWith( \"chrome://\" ) ) browser.tabs.sendMessage( tab.id, msg.Add(info.menuItemId));\r\n    }\r\n});\r\n\r\n/**\r\n * Listen runtime message, include: `corb`\r\n */\r\nbrowser.runtime.onMessage.addListener( function( request, sender, sendResponse ) {\r\n    if ( request.type == msg.MESSAGE_ACTION.CORB ) {\r\n        $.ajax( request.value.settings )\r\n            .done( result => {\r\n                sendResponse({ done: result });\r\n            })\r\n            .fail( ( jqXHR, textStatus, errorThrown ) => {\r\n                sendResponse({ fail: { jqXHR, textStatus, errorThrown }});\r\n            });\r\n    }\r\n    return true;\r\n});\r\n\r\n/**\r\n * Listen runtime message, include: `jianguo`\r\n */\r\nbrowser.runtime.onMessage.addListener( function( request, sender, sendResponse ) {\r\n    if ( request.type == msg.MESSAGE_ACTION.jianguo ) {\r\n        const { url, user, password, method } = request.value;\r\n        const dav = new WebDAV.Fs( url, user, password );\r\n        if ( method.type == \"folder\" ) {\r\n            dav.dir( method.root ).mkdir( result => {\r\n                dav.dir( method.root + \"/\" + method.folder ).mkdir( result => {\r\n                    sendResponse({ done: result, status: result.status });\r\n                });\r\n            })\r\n        } else if ( method.type == \"file\" ) {\r\n            dav.file( method.path ).write( method.content, result => {\r\n                sendResponse({ done: result, status: result.status });\r\n            });\r\n        } else if ( method.type == \"read\" ) {\r\n            dav.file( method.path ).read( result => {\r\n                sendResponse({ done: result.response, status: result.status });\r\n            });\r\n        }\r\n    }\r\n    //return true;\r\n});\r\n\r\n/**\r\n * Listen runtime message, include: `webdav`\r\n */\r\nbrowser.runtime.onMessage.addListener( function( request, sender, sendResponse ) {\r\n    if ( request.type == msg.MESSAGE_ACTION.WebDAV ) {\r\n        const { url, user, password, method } = request.value;\r\n        const dav = new WebDAV.Fs( url, user, password );\r\n        if ( method.type == \"folder\" ) {\r\n            dav.dir( method.root ).mkdir( result => {\r\n                sendResponse({ done: result, status: result.status });\r\n            })\r\n        } else if ( method.type == \"file\" ) {\r\n            dav.file( method.root + \"/\" + method.name ).write( method.content, result => {\r\n                sendResponse({ done: result, status: result.status });\r\n            });\r\n        }\r\n    }\r\n    //return true;\r\n});\r\n\r\n/**\r\n * Listen runtime message, include: `download`, `base64` && `permission`\r\n */\r\nbrowser.runtime.onMessage.addListener( function( request, sender, sendResponse ) {\r\n    if ( request.type == msg.MESSAGE_ACTION.download ) {\r\n        const { data, name } = request.value;\r\n        const blob = new Blob([data], {\r\n            type: \"html/plain;charset=utf-8\"\r\n        });\r\n        const url = URL.createObjectURL(blob);\r\n        browser.downloads.download({\r\n            url     : url,\r\n            filename: name.replace( /[|]/ig, \"\" ),\r\n        }, downloadId => {\r\n            sendResponse({ done: downloadId });\r\n        });\r\n    } else if ( request.type == msg.MESSAGE_ACTION.base64 ) {\r\n        const { url } = request.value;\r\n        fetch( url )\r\n            .then( response => response.blob() )\r\n            .then( blob     => new Promise(( resolve, reject ) => {\r\n                const reader = new FileReader()\r\n                reader.onloadend = event => {\r\n                    sendResponse({ done: { url, uri: event.target.result }});\r\n                };\r\n                reader.onerror = error => {\r\n                    sendResponse({ fail: { error, url } });\r\n                };\r\n                reader.readAsDataURL( blob );\r\n            }))\r\n            .catch( error => {\r\n                sendResponse({ fail: { error, url } });\r\n            });\r\n    } else if ( request.type == msg.MESSAGE_ACTION.permission ) {\r\n        permission.Get({ permissions: [ \"downloads\" ] }, result => {\r\n            sendResponse({ done: result });\r\n        });\r\n    }\r\n    return true;\r\n});\r\n\r\n/**\r\n * Listen runtime message, include: `snapshot`\r\n */\r\nbrowser.runtime.onMessage.addListener( function( request, sender, sendResponse ) {\r\n    if ( request.type == msg.MESSAGE_ACTION.snapshot ) {\r\n        const { left, top, width, height } = request.value;\r\n        chrome.tabs.captureVisibleTab( { format: \"png\" }, base64 => {\r\n            const image  = new Image();\r\n            image.src    = base64;\r\n            image.onload = () => {\r\n                const canvas  = document.createElement( \"canvas\" ),\r\n                      ctx     = canvas.getContext( \"2d\" ),\r\n                      dpi     = self.devicePixelRatio,\r\n                      sx      = left   * dpi,\r\n                      sy      = top    * dpi,\r\n                      sWidth  = width  * dpi,\r\n                      sHeight = height * dpi;\r\n                canvas.width  = sWidth;\r\n                canvas.height = sHeight;\r\n                ctx.drawImage( image, sx, sy, sWidth, height * dpi, 0, 0, sWidth, sHeight );\r\n                const uri     = canvas.toDataURL( \"image/png\" );\r\n                sendResponse({ done: uri });\r\n          };\r\n        });\r\n    }\r\n    return true;\r\n});\r\n\r\n/**\r\n * Listen runtime message\r\n */\r\nbrowser.runtime.onMessage.addListener( function( request, sender, sendResponse ) {\r\n    console.log( \"background runtime Listener\", request );\r\n    switch ( request.type ) {\r\n        case msg.MESSAGE_ACTION.shortcuts:\r\n            getCurTab( { url: request.value.url }, tabs => {\r\n                browser.tabs.sendMessage( tabs[0].id, msg.Add( msg.MESSAGE_ACTION.shortcuts ));\r\n            });\r\n            break;\r\n        case msg.MESSAGE_ACTION.browser_action:\r\n            getCurTab( { url: request.value.url }, tabs => {\r\n                if ( tabs && tabs.length > 0 && tabs[0].url == request.value.url ) {\r\n                    setMenuAndIcon( tabs[0].id, request.value.code );\r\n                } else console.error( request );\r\n            });\r\n            break;\r\n        case msg.MESSAGE_ACTION.new_tab:\r\n            browser.tabs.create({ url: request.value.url });\r\n            break;\r\n        case msg.MESSAGE_ACTION.close_tab:\r\n            getCurTab( { \"active\": true }, tabs => {\r\n                tabs.forEach( tab => {\r\n                    tab.active && tab.url == request.value.url &&\r\n                        browser.tabs.remove( tab.id );\r\n                });\r\n            });\r\n            break;\r\n        case msg.MESSAGE_ACTION.menu:\r\n            const { id, value } = request.value;\r\n            // hack code refresh options menu changed, and not saved storage\r\n            storage.option.menu[id] = value;\r\n            value === true ? menu.Create( id ) : menu.Remove( id );\r\n            break;\r\n        case msg.MESSAGE_ACTION.updated:\r\n            watch.Push( request.value.type, request.value.value );\r\n            break;\r\n        case msg.MESSAGE_ACTION.save_verify:\r\n            sendResponse( watch.Lock( request.value.url ));\r\n            break;\r\n        case msg.MESSAGE_ACTION.auth:\r\n            browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#labs?auth=\" + request.value.name.toLowerCase() ) });\r\n            break;\r\n        case msg.MESSAGE_ACTION.update_site:\r\n            getCurTab({ active: true, url: request.value.url }, tabs => {\r\n                tabs.length > 0 && ( upTabId = tabs[0].id );\r\n                browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#sites?update=\" + encodeURI( JSON.stringify( request.value.site ))) });\r\n            });\r\n            break;\r\n        case msg.MESSAGE_ACTION.save_site:\r\n            browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#sites?pending=\" + encodeURI( JSON.stringify( request.value ))) });\r\n            break;\r\n        case msg.MESSAGE_ACTION.temp_site:\r\n            browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#sites?temp=\" + encodeURI( JSON.stringify( request.value ))) });\r\n            break;\r\n        case msg.MESSAGE_ACTION.auth_success:\r\n            getCurTab( { url: request.value.url }, tabs => {\r\n                if ( tabs && tabs.length > 0 ) {\r\n                    browser.tabs.remove( tabs[0].id );\r\n                    getCurTab( { \"active\": true }, tabs => {\r\n                        tabs.forEach( tab => browser.tabs.sendMessage( tab.id, msg.Add( msg.MESSAGE_ACTION.export, {type: request.value.name.toLowerCase()} )) );\r\n                    });\r\n                }\r\n            });\r\n            break;\r\n        case msg.MESSAGE_ACTION.track:\r\n            tracked( request.value );\r\n            break;\r\n        case msg.MESSAGE_ACTION.speak:\r\n            browser.tts.speak( request.value.content );\r\n            break;\r\n        case msg.MESSAGE_ACTION.speak_stop:\r\n            browser.tts.stop();\r\n            break;\r\n        case msg.MESSAGE_ACTION.tips:\r\n            tips.Verify( request.value.code, sendResponse );\r\n            break;\r\n        case msg.MESSAGE_ACTION.tips_norepeat:\r\n            tips.Done( request.value.code );\r\n            break;\r\n        case msg.MESSAGE_ACTION.screenshot:\r\n            UI.status('orange', \"grab\");\r\n            Screenshotter.grab(request.value.exportType);\r\n            break;\r\n    }\r\n});\r\n\r\n/**\r\n * Listen chrome tab active message, include: `tab_selected`\r\n */\r\nbrowser.tabs.onActivated.addListener( function( active ) {\r\n    getCurTab( { \"active\": true, \"currentWindow\": true }, tabs => {\r\n        if ( tabs && tabs.length > 0 && tabs[0].status == \"complete\" ) {\r\n            console.log( \"background tabs Listener:active\", active );\r\n            if ( tabs && tabs.length > 0 && !tabs[0].url.startsWith( \"chrome://\" ) ) {\r\n                browser.tabs.sendMessage( tabs[0].id, msg.Add( msg.MESSAGE_ACTION.tab_selected, { is_update: false } ));\r\n            } else {\r\n                setMenuAndIcon( tabs[0].id, -1 );\r\n            }\r\n        } else console.error( \"onActivated.addListener error\" );\r\n    });\r\n});\r\n\r\n/**\r\n * Listen chrome tab update message, include: `tab_selected`\r\n */\r\nbrowser.tabs.onUpdated.addListener( function( tabId, changeInfo, tab ) {\r\n    watch.Pull( tabId );\r\n    if ( changeInfo.status == \"complete\" ) {\r\n        console.log( \"background tabs Listener:update\", tabId, changeInfo, tab );\r\n\r\n        if ( tab.url.startsWith( \"http://ksria.com/simpread/auth.html\" )) {\r\n            const url = tab.url.replace( \"http://ksria.com/simpread/auth.html?id=\", \"\" ),\r\n                  id  = url.includes( \"#\" ) || url.includes( \"&\" ) ? url.substr( 0, url.search( /\\S(#|&)/ ) + 1 ) : url ;\r\n            browser.tabs.query( {}, tabs => {\r\n                const opts = tabs.find( tab => tab.url.includes( chrome.runtime.getURL( \"options/options.html\" ) ));\r\n                if ( opts ) {\r\n                    browser.tabs.sendMessage( opts.id, msg.Add( msg.MESSAGE_ACTION.redirect_uri, { uri: tab.url, id } ));\r\n                    browser.tabs.remove( tabId );\r\n                }\r\n            });\r\n        } else if ( tab.url.startsWith( \"https://simpread.ksria.cn/plugins/install/\" )) {\r\n            const url = tab.url.replace( \"https://simpread.ksria.cn/plugins/install/\", \"\" );\r\n            browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#plugins?install=\" + encodeURIComponent(url) ) });\r\n            browser.tabs.remove( tabId );\r\n        } else if ( tab.url.startsWith( \"https://simpread.ksria.cn/sites/install/\" )) {\r\n            const url = tab.url.replace( \"https://simpread.ksria.cn/sites/install/\", \"\" );\r\n            browser.tabs.create({ url: chrome.runtime.getURL( \"options/options.html#sites?install=\" + encodeURIComponent(url) ) });\r\n            browser.tabs.remove( tabId );\r\n        } else if ( tab.url == browser.runtime.getURL( \"options/options.html#sites?update=success\" ) ) {\r\n            browser.tabs.remove( tabId );\r\n            upTabId > 0 && chrome.tabs.reload( upTabId, () => { upTabId == -1; });\r\n        } else if ( tab.url == browser.runtime.getURL( \"options/options.html#sites?update=failed\" ) ) {\r\n            browser.tabs.remove( tabId );\r\n        } else if ( tab.url == browser.runtime.getURL( \"options/options.html#sites?update=complete\" ) ) {\r\n            browser.tabs.remove( tabId );\r\n        } else if ( tab.url == browser.runtime.getURL( \"options/options.html#sites?update=pending\" ) ) {\r\n            browser.tabs.remove( tabId );\r\n            upTabId > 0 && browser.tabs.sendMessage( upTabId, msg.Add( msg.MESSAGE_ACTION.pending_site ));\r\n            upTabId == -1;\r\n        }\r\n\r\n        if ( !tab.url.startsWith( \"chrome://\" ) ) {\r\n            browser.tabs.sendMessage( tabId, msg.Add( msg.MESSAGE_ACTION.tab_selected, { is_update: true } ));\r\n        } else {\r\n            setMenuAndIcon( tab.id, -1 );\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Listen chrome tab remove message\r\n */\r\nbrowser.tabs.onRemoved.addListener( tabId => watch.Pull( tabId ));\r\n\r\n/**\r\n * Listen chrome page, include: `read`\r\n */\r\nchrome.action.onClicked.addListener( function( tab ) {\r\n    browser.tabs.sendMessage( tab.id, msg.Add( msg.MESSAGE_ACTION.browser_click ));\r\n});\r\n\r\n\r\n/**\r\n * Get current tab object\r\n * \r\n * @param {object}   query\r\n * @param {function} callback\r\n */\r\nfunction getCurTab( query, callback ) {\r\n    if ( query.url && query.url.includes( \"#\" ) ) {\r\n        browser.tabs.query( {}, tabs => callback( tabs.filter( tab => tab.url == query.url && tab.active ) ) );\r\n    } else browser.tabs.query( query, function( tabs ) { callback( tabs ); });\r\n}\r\n\r\n/**\r\n * Set page action icon and context menu\r\n * \r\n * @param {int} tab.id\r\n * @param {int} -1: disable icon;\r\n */\r\nfunction setMenuAndIcon( id, code ) {\r\n    let icon = \"\";\r\n    if ( code == -1 ) {\r\n        //chrome.action.hide( id ); todo\r\n        menu.Update( \"tempread\" );\r\n    } else {\r\n        icon = \"-enable\";\r\n        //chrome.action.show( id ); todo\r\n        storage.option.menu.read === true && menu.Create( \"read\" );\r\n        menu.Update( \"read\" );\r\n    }\r\n    chrome.action.setIcon({ tabId: id, path: chrome.runtime.getURL( `assets/images/icon16${icon}.png` ) });\r\n}\r\n\r\n/**\r\n * Track\r\n * \r\n * @param {object} google analytics track object\r\n */\r\nfunction tracked({ eventCategory, eventAction, eventValue }) {\r\n    console.log( \"current track is\", eventCategory, eventAction, eventValue )\r\n    // _gaq.push([ '_trackEvent', eventCategory, eventValue ]);\r\n}\r\n\r\n/**\r\n * Uninstall\r\n */\r\nfunction uninstall() {\r\n    browser.runtime.setUninstallURL( storage.option.uninstall ? storage.service + \"/uninstall\" : \"\" );\r\n    tracked({ eventCategory: \"install\", eventAction: \"install\", eventValue: \"uninstall\" });\r\n}\r\n\r\n\r\nasync function getCurrentTab() {\r\n  let queryOptions = { active: true, lastFocusedWindow: true };\r\n  // `tab` will either be a `tabs.Tab` instance or `undefined`.\r\n  let [tab] = await chrome.tabs.query(queryOptions);\r\n  return tab;\r\n}\r\n\r\n\r\nchrome.runtime.onInstalled.addListener(function (details) {\r\n    console.log(' details', details);\r\n    // \r\n    const { reason, previousVersion } = details;\r\n    if (reason === 'install') {\r\n      console.log('');\r\n      // \r\n      chrome.tabs.create({ url : \"https://ladderreader.com\", active : true });\r\n    } else if (reason === 'update' && !hasNewVersion(previousVersion)) {\r\n        //chrome.tabs.create({ url, active });\r\n    }\r\n});\r\n\r\n\r\n// begin \r\n\r\n\r\nvar UI = {\r\n    status: function(color, text, timed) {\r\n        if (color == null) {\r\n        return;\r\n        } else if (color == 'green') {\r\n        chrome.action.setBadgeBackgroundColor({ color: [0, 255, 0, 255] });\r\n        } else if (color == 'red') {\r\n        chrome.action.setBadgeBackgroundColor({ color: [255, 0, 0, 255] });\r\n        } else if (color == 'orange' ) {\r\n        chrome.action.setBadgeBackgroundColor({ color: [255, 128, 0, 255] });\r\n        } else if (color == 'azure' ) {\r\n        chrome.action.setBadgeBackgroundColor({ color: [0, 128, 255, 255] });\r\n        }\r\n        chrome.action.setBadgeText({ text: text });\r\n\r\n        // *** Triggered if the message will be shown just for a short amout of time (specified)\r\n        if (timed > 0) {\r\n        setTimeout(function() {\r\n            chrome.action.setBadgeText({ text: \"\" });\r\n        }, timed);\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n *  Blipshot\r\n *  Screenshotter.js\r\n *  Half of the screenshotter algorithm. See Screenshotter.DOM.js for the other half.\r\n *\r\n *  ==========================================================================================\r\n *\r\n *  Copyright (c) 2010-2021, Erin Casali.\r\n *  All rights reserved.\r\n *\r\n *  Redistribution and use in source and binary forms, with or without modification, are\r\n *  permitted provided that the following conditions are met:\r\n *\r\n *  Redistributions of source code must retain the above copyright notice, this list of\r\n *  conditions and the following disclaimer.\r\n *  Redistributions in binary form must reproduce the above copyright notice, this list of\r\n *  conditions and the following disclaimer in the documentation and/or other materials\r\n *  provided with the distribution.\r\n *  Neither the name of the Baker Framework nor the names of its contributors may be used to\r\n *  endorse or promote products derived from this software without specific prior written\r\n *  permission.\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\n *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT\r\n *  SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\r\n *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\r\n *  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\r\n *  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n *  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n */\r\n\r\nvar Screenshotter = {\r\n\r\n    imageDataURL: [],\r\n  \r\n    shared: {\r\n      imageDirtyCutAt: 0,\r\n      imageDataURL: 0,\r\n  \r\n      originalScrollTop: 0,\r\n  \r\n      tab: {\r\n        id: 0,\r\n        url: \"\",\r\n        title: \"\",\r\n        hasVscrollbar: false\r\n      }\r\n    },\r\n  \r\n    // ****************************************************************************************** SCREENSHOT SEQUENCE START\r\n  \r\n    // 0\r\n    grab: async function(exportType) {\r\n      /****************************************************************************************************\r\n       * It's a chaos: the ball must bounce between background and script content since the first\r\n       * can grab and the second can access the DOM (scroll)\r\n       *\r\n       * So the call stack is:\r\n       *    grab (bg)\r\n       *      screenshotBegin (script)\r\n       *      loop {\r\n       *        screenshotVisibleArea (bg)\r\n       *        screenshotScroll (script)\r\n       *      }\r\n       *      screenshotEnd (bg)\r\n       *      screenshotReturn (script)\r\n       */\r\n      var self = this;\r\n  \r\n      // ****** Reset screenshot container\r\n      this.imageDataURLPartial = [];\r\n\r\n      // ****** Get tab data\r\n\r\n      let queryOptions = { active: true, lastFocusedWindow: true };\r\n      // `tab` will either be a `tabs.Tab` instance or `undefined`.\r\n      let [tab] = await chrome.tabs.query(queryOptions);\r\n        self.shared.tab = tab;\r\n        // ****** Check if everything's is in order.\r\n        var parts = tab.url.match(/https?:\\/\\/chrome.google.com\\/?.*/);\r\n        if (parts !== null) {\r\n        alert(\"I'm sorry.\\n\\nDue to security restrictions \\non the Google Chrome Store, \\nBlipshot can't run here.\\n\\nTry on any other page. ;)\\n\\n\");\r\n        return false;\r\n        }\r\n\r\n        // ****** Check if script is loaded\r\n        chrome.tabs.sendMessage(self.shared.tab.id, { action: 'heartbeat' }, function(response) {\r\n        if (!response) {\r\n            UI.status('red', \"!\", 1000);\r\n        }\r\n        });\r\n        self.shared.exportType = exportType;\r\n        // ****** Begin!\r\n        chrome.tabs.sendMessage(self.shared.tab.id, { action: 'blanketStyleSet', type: 'blanketStyleSet', property: 'position', from: 'fixed', to: 'absolute' });\r\n        chrome.tabs.sendMessage(self.shared.tab.id, { action: 'blanketStyleSet', type: 'blanketStyleSet', property: 'position', from: 'sticky', to: 'relative' });\r\n        self.screenshotBegin(self.shared);\r\n    },\r\n  \r\n    // 1\r\n    screenshotBegin: function(shared) { chrome.tabs.sendMessage(this.shared.tab.id, { action: 'screenshotBegin', type: 'screenshotBegin', shared: shared }); },\r\n  \r\n    // 2\r\n    screenshotVisibleArea: function(shared) {\r\n      console.log( \"2 screenshotVisibleArea\", shared )\r\n      var self = this;\r\n      chrome.tabs.captureVisibleTab(null, { format: \"png\" /* png, jpeg */, quality: 100 }, function(dataUrl) {\r\n        if (dataUrl) {\r\n          // Grab successful\r\n          self.imageDataURLPartial.push(dataUrl);\r\n          self.screenshotScroll(shared);\r\n        } else {\r\n          // Grab failed, warning\r\n          // To handle issues like permissions - https://github.com/folletto/Blipshot/issues/9\r\n          alert(\"I'm sorry.\\n\\nIt seems Blipshot wasn't able to grab the screenshot of the active tab.\\n\\nPlease check the extension permissions.\\n\\nIf the problem persists contact me at \\nhttp://github.com/folletto/Blipshot/issues\\n\\nError: \" + chrome.runtime.lastError.message + \"\\n\\n\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  \r\n    // 3\r\n    screenshotScroll: function(shared) { \r\n        console.log( \"3 screenshotScroll\", shared )\r\n        chrome.tabs.sendMessage(this.shared.tab.id, { action: 'screenshotScroll',type: 'screenshotScroll',  shared: shared }); \r\n    },\r\n  \r\n    // 4\r\n    screenshotEnd: function(shared) {\r\n      console.log( \"4 screenshotEnd\", shared )\r\n      var self = this;\r\n      UI.status('azure', \"make\");\r\n      chrome.tabs.sendMessage(this.shared.tab.id, { action: 'handleRecursiveImageMerge',type: 'handleRecursiveImageMerge',  shared: shared,imageDataURLPartial: this.imageDataURLPartial}); \r\n    },\r\n  \r\n    // 5\r\n    screenshotReturn: function(shared) {\r\n      console.log( \"5 screenshotReturn\", shared )\r\n      UI.status('green', \"\", 3000);\r\n      chrome.tabs.sendMessage(this.shared.tab.id, { action: 'blanketStyleRestore',type: 'blanketStyleRestore', property: 'position' });\r\n      chrome.tabs.sendMessage(this.shared.tab.id, { action: 'screenshotReturn',type: 'screenshotReturn', shared: shared });\r\n    },\r\n  \r\n    // ****************************************************************************************** EVENT MANAGER / HALF\r\n    eventManagerInit: function() {\r\n      /****************************************************************************************************\r\n       * This function prepares the internal plugin callbacks to bounce between the plugin and DOM side.\r\n       * It's initialized at the end of this file.\r\n       */\r\n      var self = this;\r\n      browser.runtime.onMessage.addListener(function(e) {\r\n          console.log( \"eventManagerInit\", e )\r\n          switch (e.action) {\r\n            case \"grab\": self.grab(); break;\r\n            case \"screenshotVisibleArea\": self.screenshotVisibleArea(e.shared); break;\r\n            case \"screenshotEnd\": self.screenshotEnd(e.shared); break;\r\n            case \"screenshotReturn\": self.screenshotReturn(e.shared); break;       \r\n          }\r\n      });\r\n    },\r\n  \r\n    // ****************************************************************************************** SUPPORT\r\n    recursiveImageMerge: function(imageDataURLs, imageDirtyCutAt, hasVscrollbar, callback, images, i) {\r\n      /****************************************************************************************************\r\n       * This function merges together all the pieces gathered during the scroll, recursively.\r\n       * Returns a single data:// URL object from canvas.toDataURL(\"image/png\") to the callback.\r\n       */\r\n      i = i || 0;\r\n      images = images || [];\r\n  \r\n      if (i < imageDataURLs.length) {\r\n        images[i] = new Image();\r\n        images[i].onload = function() {\r\n          imageDataURLs[i] = null; // clear for optimize memory consumption (not sure)\r\n          if (i == imageDataURLs.length - 1) {\r\n            // ****** We're at the end of the chain, let's have fun with canvas.\r\n            var canvas = window.document.createElement('canvas');\r\n  \r\n            // NOTE: Resizing a canvas is destructive, we can do it just now before stictching\r\n            canvas.width = images[0].width - (hasVscrollbar ? 15 : 0); // <-- manage V scrollbar\r\n  \r\n            if (images.length > 1) canvas.height = (imageDataURLs.length - 1) * images[0].height + imageDirtyCutAt;\r\n            else canvas.height = images[0].height;\r\n  \r\n            // Ouch: Skia / Chromium limitation\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=339725\r\n            // https://bugs.chromium.org/p/skia/issues/detail?id=2122\r\n            if (canvas.height > 32766) canvas.height = 32766;\r\n  \r\n            // ****** Stitch\r\n            for (var j = 0; j < images.length; j++) {\r\n              var cut = 0;\r\n              if (images.length > 1 && j == images.length - 1) cut = images[j].height - imageDirtyCutAt;\r\n  \r\n              var height = images[j].height - cut;\r\n              var width = images[j].width;\r\n  \r\n              // void canvas.getContext(\"2d\").drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\r\n              //console.log(\"[i:\" + i + \", j:\" + j + \"] --- total images:\" + imageDataURLs.length);\r\n              //console.log(\"--> drawImage(images[\" + j + \"], sx:0, sy/cut:\" + cut + \", swidth:\" + width + \", sheight:\" + height + \", dx:0, dy:\" + (j * images[0].height) + \", dwidth:\" + width + \", dheight:\" + height + \");\");\r\n              canvas.getContext(\"2d\").drawImage(images[j], 0, cut, width, height, 0, j * images[0].height, width, height);\r\n            }\r\n  \r\n            callback(canvas.toDataURL(\"image/png\")); // --> CALLBACK (note that the file type is used also in the drag function)\r\n          } else {\r\n            // ****** Down!\r\n            recursiveImageMerge(imageDataURLs, imageDirtyCutAt, hasVscrollbar, callback, images, ++i);\r\n          }\r\n        }\r\n        images[i].src = imageDataURLs[i]; // Load!\r\n      }\r\n    }\r\n  }\r\n  \r\n  /* \\/ Initialize callback listeners */\r\n  Screenshotter.eventManagerInit();\r\n  /* /\\ Initialize callback listeners */\r\n  \r\n// end \n\n\n// WEBPACK FOOTER //\n// ./src/background.js","console.log( \"=== simpread local load ===\" )\n\nconst id    = \"simpread\",\n      NAMES = {\n        VER   : \"version\",\n        COUNT : \"count\",\n        FIRST : \"firstload\",\n        PATCH: \"patch-update\",\n      },\n      MAX_COUNT = 5;\n\nlet curcount;\n\n/**\n * Read and Write Local Storage\n * \n * @class\n */\nclass Local {\n\n    get curcount() {\n        return curcount;\n    }\n\n    /**\n     * @method\n     * \n     * @return {boolean} true: not MAX_COUNT; false: exceed MAX_COUNT, re-count\n     */\n    Count() {\n        const [ cur = 0 ] = [ get(NAMES.COUNT) ];\n        curcount          = cur;\n        set( NAMES.COUNT, ++curcount );\n        if ( curcount > MAX_COUNT ) {\n            set( NAMES.COUNT, 0 );\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    /**\n     * @method\n     * \n     * @return {boolean} true: first load; false: not first load\n     */\n    Firstload() {\n        let [ firstload = \"true\" ] = [ get(NAMES.FIRST) ];\n        if ( firstload == \"true\" ) {\n            set( NAMES.FIRST, false );\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * Save manifest.json version to local storage\n     * \n     * @param {string} version\n     */\n    Version( version ) {\n        set( NAMES.VER, version );\n    }\n\n    /**\n     * Save manifest.json version to local storage\n     * \n     * @param {string} version\n     */\n    Patch( state, value ) {\n        if ( state == \"add\" ) set( NAMES.PATCH, value );\n        else if ( state == \"get\" ) return get( NAMES.PATCH );\n        else if ( state == \"remove\" ) remove( NAMES.PATCH );\n    }\n\n}\n\n/**\n * Get localStorage from key\n * \n * @param {string} NAMES.{value}\n */\nfunction get( key ) {\n    return localStorage[ `${id}-${key}` ];\n}\n\n/**\n * Set localStorage\n * \n * @param {string} NAMES.{value}\n * @param {any}  any value\n */\nfunction set( key, value ) {\n    localStorage[ `${id}-${key}` ] = value;\n}\n\n/**\n * Remove localStorage\n * \n * @param {string} NAMES.{value}\n */\nfunction remove( key ) {\n    localStorage.removeItem( `${id}-${key}` );\n}\nconst local = new Local();\nexport default local;\n\n\n// WEBPACK FOOTER //\n// ./src/service/local.js","/* A simple WebDav implementation in JavaScript\n   https://github.com/aslakhellesoy/webdavjs @license MIT\n*/\nvar WebDAV = {\n    GET: function(url, callback) {\n        return this.request('GET', url, {}, null, 'text', callback);\n    },\n\n    PROPFIND: function(url, callback) {\n        return this.request('PROPFIND', url, {\n            Depth: \"1\"\n        }, null, 'xml', callback);\n    },\n\n    MKCOL: function(url, callback) {\n        return this.request('MKCOL', url, {}, null, 'text', callback);\n    },\n\n    DELETE: function(url, callback) {\n        return this.request('DELETE', url, {}, null, 'text', callback);\n    },\n\n    PUT: function(url, data, callback) {\n        return this.request('PUT', url, {}, data, 'text', callback);\n    },\n\n    Author: function(user, password) {\n        this.user = user;\n        this.password = password;\n    },\n\n    request: function(verb, url, headers, data, type, callback) {\n        var xhr = new XMLHttpRequest();\n        var body = function() {\n                var b = xhr.responseText;\n                if (type == 'xml') {\n                    var xml = xhr.responseXML;\n                    if (xml) {\n                        b = xml.firstChild.nextSibling ? xml.firstChild.nextSibling : xml.firstChild;\n                    }\n                }\n                return b;\n            };\n\n        if (callback) {\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === XMLHttpRequest.DONE && verb == \"PROPFIND\") {\n                    var b = body();\n                    if (b) {\n                        callback(b);\n                    }\n                } else if (xhr.readyState === XMLHttpRequest.DONE) {\n                    callback(xhr);\n                }\n            };\n        }\n        xhr.open(verb, url, !! callback);\n        xhr.setRequestHeader(\"Content-Type\", \"text/xml; charset=UTF-8\");\n        this.user && this.password &&\n            xhr.setRequestHeader(\"Authorization\", \"Basic \" + btoa(this.user + \":\" + this.password))\n        for (var header in headers) {\n            xhr.setRequestHeader(header, headers[header]);\n        }\n        xhr.send(data);\n\n        if (!callback) {\n            return body();\n        }\n    }\n};\n\n// An Object-oriented API around WebDAV.\nWebDAV.Fs = function(rootUrl, user, password) {\n    WebDAV.Author(user, password);\n    this.rootUrl = rootUrl;\n    var fs = this;\n\n    this.file = function(href) {\n        this.type = 'file';\n\n        this.url = fs.urlFor(href);\n\n        this.name = fs.nameFor(this.url);\n\n        this.read = function(callback) {\n            return WebDAV.GET(this.url, callback);\n        };\n\n        this.write = function(data, callback) {\n            return WebDAV.PUT(this.url, data, callback);\n        };\n\n        this.rm = function(callback) {\n            return WebDAV.DELETE(this.url, callback);\n        };\n\n        return this;\n    };\n\n    this.dir = function(href) {\n        this.type = 'dir';\n\n        this.url = fs.urlFor(href);\n\n        this.name = fs.nameFor(this.url);\n\n        this.children = function(callback) {\n            var childrenFunc = function(doc) {\n                    if (doc.childNodes == null) {\n                        throw ('No such directory: ' + url);\n                    }\n                    var result = [];\n                    // Start at 1, because the 0th is the same as self.\n                    for (var i = 1; i < doc.childNodes.length; i++) {\n                        var response = doc.childNodes[i];\n                        var href = decodeURI( response.getElementsByTagName('d:href')[0].firstChild.nodeValue.replace(/\\/$/, ''));\n                        var propstat = response.getElementsByTagName('d:propstat')[0];\n                        var prop = propstat.getElementsByTagName('d:prop')[0];\n                        var resourcetype = prop.getElementsByTagName('d:resourcetype')[0];\n                        var collection = resourcetype.getElementsByTagName('d:collection')[0];\n\n                        if (collection) {\n                            result[i - 1] = new fs.dir(href);\n                        } else {\n                            result[i - 1] = new fs.file(href);\n                        }\n                    }\n                    return result;\n                };\n\n            if (callback) {\n                WebDAV.PROPFIND(this.url, function(doc) {\n                    callback(childrenFunc(doc));\n                });\n            } else {\n                return childrenFunc(WebDAV.PROPFIND(this.url));\n            }\n        };\n\n        this.rm = function(callback) {\n            return WebDAV.DELETE(this.url, callback);\n        };\n\n        this.mkdir = function(callback) {\n            return WebDAV.MKCOL(this.url, callback);\n        };\n\n        return this;\n    };\n\n    this.urlFor = function(href) {\n        return (/^http/.test(href) ? href : this.rootUrl + href);\n    };\n\n    this.nameFor = function(url) {\n        return url.replace(/.*\\/(.*)/, '$1');\n    };\n\n    return this;\n};\n\nif (typeof module !== 'undefined') {\n    module.exports = WebDAV;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/vender/webdav.js","\nimport {browser} from 'browser';\n\nfunction Get( permissions, callback ) {\n    browser.permissions.contains({ permissions: permissions.permissions }, result => {\n        result == false ? chrome.permissions.request( permissions, granted => {\n            callback( granted );\n        }): callback( result );\n    });\n}\n\nfunction Remove( permissions, callback ) {\n    browser.permissions.remove( { permissions: permissions.permissions }, result => {\n        callback( result )\n    })\n}\n\nexport {\n    Get,\n    Remove\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/permission.js","console.log( \"=== simpread tips load ===\" )\n\nimport Notify      from 'notify';\nimport * as msg    from 'message';\nimport {browser}   from 'browser';\n\n/**\n * Verify current page and some plugin exist\n * \n * @param {array} plugins ids\n */\nfunction Render( plugins ) {\n    const notify = code => {\n        new Notify().Render( messages[code], \"\", () => {\n            browser.runtime.sendMessage( msg.Add( msg.MESSAGE_ACTION.tips_norepeat, { code }));\n        });\n    },\n    pushMessage = code => {\n        browser.runtime.sendMessage( msg.Add( msg.MESSAGE_ACTION.tips, { code }), result => {\n            if ( result ) {\n                notify( code );\n            }\n        });\n    }\n    // messages = {\n    //     \"klGUASLasg\": '      <a target=\"blank\" href=\"https://simpread.ksria.cn/plugins/details/klGUASLasg\"></a> ',\n    //     \"VQOZdNET2d\": ' <a target=\"blank\" href=\"https://simpread.ksria.cn/plugins/details/VQOZdNET2d\"></a> ',\n    //     \"DxlFcL52iy\": ' <a target=\"blank\" href=\"https://simpread.ksria.cn/plugins/details/DxlFcL52iy\">Materail Design </a> ',\n    // }\n    // // verify klGUASLasg\n    // if ( $( \"sr-read\" ).find( \"pre\" ).length > 0 && plugins.findIndex( item => item == \"klGUASLasg\" ) == -1 ) {\n    //     pushMessage( \"klGUASLasg\" );\n    // }\n    // // verify VQOZdNET2d\n    // if ( $( \"sr-read\" ).find( \"img\" ).length > 5 && plugins.findIndex( item => item == \"VQOZdNET2d\" ) == -1 ) {\n    //     pushMessage( \"VQOZdNET2d\" );\n    // }\n    // // verify DxlFcL52iy\n    // if ( ( location.hostname == \"www.zhihu.com\" && location.pathname.startsWith( \"/question/\" ) ) && plugins.findIndex( item => item == \"DxlFcL52iy\" ) == -1 ) {\n    //     pushMessage( \"DxlFcL52iy\" );\n    // }\n}\n\n/**\n * Help\n * \n * @param {object} storage.statistics\n */\nfunction Help( statistics ) {\n    if ( statistics.read == 1 ) {\n        new Notify().Render({ content: \"Hi, nice to use the ladder reader for the first time, do you have a look at the newbie help\", action: \"yes\", cancel: \"no\", callback: type => {\n            type == \"action\" && browser.runtime.sendMessage( msg.Add( msg.MESSAGE_ACTION.new_tab, { url: \"https://ladderreader.com\" }));\n            type == \"cancel\" && browser.runtime.sendMessage( msg.Add( msg.MESSAGE_ACTION.tips_norepeat, { code: \"readmode\" }));\n        }});\n    }\n}\n\n/**\n * Background call\n * \n * @param {string} plugin id\n * @param {func} callback true: tips; false: not tip\n */\nfunction Verify( id, callback ) {\n    const tips = JSON.parse( localStorage[ \"simpread-tips\" ] || \"{}\" );\n    if ( !tips[id] ) {\n        callback( true );\n    } else callback( false );\n}\n\n/**\n * Not repeat tips\n * \n * @param {string} tips id\n */\nfunction Done( id ) {\n    const tips = JSON.parse( localStorage[ \"simpread-tips\" ] || \"{}\" );\n    tips[id]   = true;\n    localStorage.setItem( \"simpread-tips\", JSON.stringify( tips ));\n}\n\nexport {\n    Render,\n    Verify,\n    Done,\n    Help,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/tips.js","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.PureRead=e()}(this,function(){\"use strict\";var t=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")},e=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,r,n)}if(\"value\"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},i=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e},a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),o=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)};function l(t){return $.extend(!0,{},t)}function u(t){if(document){var e=document.createElement(\"a\");return e.href=t,e}var r=t.match(/^(https?\\:)\\/\\/(([^:\\/?#]*)(?:\\:([0-9]+))?)([\\/]{0,1}[^?#]*)(\\?[^#]*|)(#.*|)$/);return r&&{href:t,protocol:r[1],host:r[2],hostname:r[3],port:r[4],pathname:r[5],search:r[6],hash:r[7]}}function s(t){if(\"\"==t)return[0,t];if(h(t))return[2,t];var e=t.match(/<\\S+ (class|id)=(\"|')?[\\w-_=;:' ]+(\"|')?>?$|<[^/][-_a-zA-Z0-9]+>?$/gi);return e&&e.length>0?[1,e]:[-1,void 0]}function c(t){var e=s(t),r=a(e,2),n=r[0],i=r[1];if(2==n)return t;if(1==n){var o=i[0].trim().replace(/['\"<>]/g,\"\").replace(/ /gi,\"=\").split(\"=\"),l=a(o,3),u=l[0],c=l[1],h=l[2];return c?\"class\"===c.toLowerCase()?c=u+\".\"+h:\"id\"===c.toLowerCase()&&(c=u+\"#\"+h):c=u,c}return null}function h(t){return/^(\\[\\[)[\\[{`'/]{1}[ \\S]+[}`'/\\]]\\]\\]{1}($)/g.test(t)}function d(t){var e=[t.replace(/(^)\\[\\[|\\]\\]$/g,\"\")],r=e[0],n=e[1];switch(r[0]){case\"{\":r=r.replace(/^{|}$/g,\"\"),t=new Function(\"return \"+r)(),n=0;break;case\"'\":t=(t=r.replace(/^'|'$/g,\"\")).match(/^<[a-zA-Z0-9_-]+>/g).join(\"\").replace(/<|>/g,\"\")+\":contains(\"+t.replace(/<[/a-zA-Z0-9_-]+>/g,\"\")+\")\",n=1;break;case\"/\":t=r.replace(/^\\/|\\/$/g,\"\").replace(/\\\\{2}/g,\"\\\\\").replace(/'/g,'\"'),n=2;break;case\"[\":r=r.replace(/^{|}$/g,\"\"),t=new Function(\"return \"+r)()[0],n=3;break;case\"`\":r=p(r=r.replace(/^`|`$/g,\"\")),t=$(r),n=4;break;default:n=-1}return[t,n]}function f(t){try{if(\"\"!=t.id)return void 0==t.id?\"\":\"//*[@id='\"+t.id+\"']\";if(t===document.body)return\"/html[1]/\"+t.tagName.toLowerCase();for(var e=0,r=t.parentNode.childNodes,n=0;n<r.length;n++){var i=r[n];if(i===t)return f(t.parentNode)+\"/\"+t.tagName.toLowerCase()+\"[\"+(e+1)+\"]\";1===i.nodeType&&i.tagName===t.tagName&&e++}}catch(t){return\"\"}}function p(t){return document.evaluate(t,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}var m={url:\"\",target:\"\",matching:[],name:\"\",title:\"\",desc:\"\",exclude:[],include:\"\",avatar:[],paging:[]},v=void 0,g=void 0,y=void 0,b=void 0,w=function(){function n(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{global:[],custom:[],local:[]};t(this,n),this.url=(r=(e=\"/\"!=(e=window.location.pathname)&&e.endsWith(\"/\")?e=e.replace(/\\/$/,\"\"):e).replace(/\\/[%@#.~a-zA-Z0-9_-]+$|^\\/$/g,\"\"),window.location.protocol+\"//\"+window.location.hostname+r+\"/\"),this.sites=i,this.current={},this.state=\"none\",this.origins=[],this.mathjax=void 0,b=location.href}return e(n,[{key:\"SetURL\",value:function(t){var e,r=u(t),n=(e=\"/\"!=(e=r.pathname)&&e.endsWith(\"/\")?e=e.replace(/\\/$/,\"\"):e).replace(/\\/[%@#.~a-zA-Z0-9_-]+$|^\\/$/g,\"\");this.url=r.protocol+\"//\"+r.hostname+n+\"/\",b=t}},{key:\"SetMinimatch\",value:function(t){v=t}},{key:\"SetRdability\",value:function(t){g=t}},{key:\"SetMarkdown\",value:function(t){y=t}},{key:\"isMathJax\",value:function(){var t=this;return void 0==this.mathjax&&(this.mathjax=!1,$(\"body\").find(\"script\").each(function(e,r){r.type.startsWith(\"math\")&&(t.mathjax=!0)})),this.mathjax}},{key:\"MathJaxMode\",value:function(){var t=x();if(-1!=t)return this.Newsite(\"read\",t[0].outerHTML),this.dom=t[0],this.state=\"temp\",t;var e=k();if(e&&\"\"!=e.content){var r=j(e.content),n=r.id,i=r.cls,a=r.tag;return\"\"!=n?\"<\"+a+' id=\"'+n+'\">':\"\"!=i?\"<\"+a+' class=\"'+i+'\">':void 0}}},{key:\"Readability\",value:function(){try{var t=k();if(!t||\"\"==t.content)throw\"Readability error\";this.Newsite(\"read\",t.content,t.excerpt);var e=j(t.wrap),r=e.id,n=e.cls,i=e.tag;this.dom=\"\"!=r?$(\"body\").find(\"#\"+r)[0]:\"\"!=n?$(\"body\").find(\".\"+n.replace(/ /gi,\".\"))[0]:$(\"body\").find(\"\"+i)[0],this.state=\"temp\"}catch(t){var a=x();-1!=a?(this.Newsite(\"read\",a[0].outerHTML),this.dom=a[0],this.state=\"temp\"):this.current.site=l(m)}}},{key:\"Getsite\",value:function(t,e){return this.sites[t].find(function(t){return t[0]==e})}},{key:\"Getsites\",value:function(){var t=this,e=[],n=function(){if(v(location.href,\"file://**/*.txt\")||v(location.href,\"http*://**/*.txt\"))return function(){var t=location.pathname.split(\"/\").pop(),e=\"file:\"==location.protocol?\"local\":\"remote\",r={name:\"txtread::\"+e,title:\"<title>\",desc:\"\",include:\"<pre>\",auto:!1,exclude:[]};\"remote\"==e&&(r.include=\"\",r.html=$(\"body pre\").html().replace(/\\n/gi,\"<br>\"));return!$(\"title\").html()&&$(\"head\").append(\"<title>\"+decodeURI(t.replace(\".txt\",\"\"))+\"</title>\"),r}();if($($(\"body\").children()[0]).is(\"pre\")&&(v(location.href,\"file://**/*.md\")||v(location.href,\"http*://**/*.md\")))return function(){var t=location.pathname.split(\"/\").pop(),e={name:\"txtread::\"+(\"file:\"==location.protocol?\"local\":\"remote\"),title:\"<title>\",desc:\"\",include:\"\",auto:!1,exclude:[]},r=(new y.default.Converter).makeHtml($(\"body pre\").text());return e.html=r,!$(\"title\").html()&&$(\"head\").append(\"<title>\"+decodeURI(t.replace(\".md\",\"\"))+\"</title>\"),e}();var t=/<\\S+ (class|id)=(\"|')?[\\w-_=;:' ]+(\"|')?>?$|<[^/][-_a-zA-Z0-9]+>?$/gi,e={name:$(\"meta[name='simpread:name']\").attr(\"content\"),url:$(\"meta[name='simpread:url']\").attr(\"content\"),title:$(\"meta[name='simpread:title']\").attr(\"content\"),desc:$(\"meta[name='simpread:desc']\").attr(\"content\"),include:$(\"meta[name='simpread:include']\").attr(\"content\"),exp:$(\"meta[name='simpread:exclude']\").attr(\"content\"),auto:$(\"meta[name='simpread:auto']\").attr(\"content\"),exclude:[]};if(e.name&&e.include){if(e.url&&!v(location.href,e.url))return;!e.title&&(e.title=\"<title>\"),!e.desc&&(e.desc=\"\"),!e.exp&&(e.exp=\"\"),e.name=\"metaread::\"+e.name,e.auto=\"true\"==e.auto;var r=[\"title\",\"desc\",\"include\",\"exp\"].findIndex(function(r){return\"\"!=e[r]&&!e[r].match(t)});return e.exclude.push(e.exp),delete e.exp,-1==r?e:void 0}return}();if(this.current.url=this.url,n)this.current.auto=n.auto,this.current.url=n.url,delete n.auto,delete n.url,this.current.site=r({},n),this.current.site.name.startsWith(\"metaread::\")&&(this.state=\"meta\"),this.current.site.name.startsWith(\"txtread::\")&&(this.state=\"txt\");else if(_(\"local\",new Map(this.sites.local),this.url,e),_(\"global\",new Map(this.sites.global),this.url,e),_(\"person\",new Map(this.sites.person),this.url,e),_(\"custom\",new Map(this.sites.custom),this.url,e),e.length>0){var i=void 0;if(e.forEach(function(e){e[1].active&&(i=e,t.current.url=i[0],t.current.site=t.Safesite(r({},i[1]),i[2],i[0]),t.state=\"adapter\")}),!i){var a=e[0];a[1].active=!0,this.current.url=a[0],this.current.site=this.Safesite(r({},a[1]),a[2],a[0]),this.state=\"adapter\"}}else{var o=function(){if(location.pathname.includes(\"thread\")||location.pathname.includes(\"forum.php\")){if($(\".t_f\").length>0&&$(\".favatar\").find(\".authi\").length>0&&$(\".avatar\").find(\"img\").length>0)return{avatar:[{name:\"[[{$('.favatar').find('.authi')}]]\"},{url:\"[[{$('.avatar').find('img')}]]\"}],include:\"[[{$('.t_f')}]]\"}}else if(/\\/t\\/[\\w-]+\\/\\d+/.test(location.pathname)&&$(\"meta[name=generator]\").attr(\"content\").includes(\"discourse\"))return{avatar:[{name:\"[[{$('.topic-avatar').find('.a[data-user-card]')}]]\"},{url:\"[[{$('.topic-avatar').find('img')}]]\"}],include:\"[[{$('.cooked')}]]\"};return-1}();-1!=o?(this.Newmultisite(\"read\",o),this.state=\"temp\"):this.Readability()}this.current.site.matching=e}},{key:\"Addsites\",value:function(t){var e=0;if(0==this.sites.global.length)this.sites.global=this.Formatsites(t),e=this.sites.global.length;else{var r=function(t,e){var r=new Map(e),n=[].concat(o(r.keys())),i=0;return t.map(function(t){n.includes(t[0])?n.includes(t[0]):i++}),{count:i,newsites:t}}(this.Formatsites(t),this.sites.global);e=r.count,this.sites.global=r.newsites}return e}},{key:\"Addlocalsites\",value:function(t){return this.sites.local=[].concat(o(t)),this.sites.local}},{key:\"Addallsites\",value:function(t){return this.sites={global:[].concat(o(t.global)),person:[].concat(o(t.person)),custom:[].concat(o(t.custom)),local:[].concat(o(t.local))},this.sites}},{key:\"Newsite\",value:function(t,e,n){var i={mode:t,url:window.location.href,site:{name:\"tempread::\"+window.location.host,title:\"<title>\",desc:\"[[{$('meta[name=Description]').attr('content')||$('meta[name=description]').attr('content')}]]\",include:\"\",exclude:[]}};e&&(i.site.html=e),this.current.mode=i.mode,this.current.url=i.url,this.current.site=this.Safesite(r({},i.site),\"local\",i.url),n&&(this.current.site.excerpt=n)}},{key:\"Newmultisite\",value:function(t,e){var n={mode:t,url:window.location.href,site:{name:\"tempread::\"+window.location.host,title:\"<title>\",desc:\"\",include:e.include,exclude:[],avatar:e.avatar}};this.current.mode=n.mode,this.current.url=n.url,this.current.site=this.Safesite(r({},n.site),\"local\",n.url)}},{key:\"Updatesite\",value:function(t,e,r){var n=this.sites[t].findIndex(function(t){return t[0]==e});-1==n&&(n=this.sites[t].length),this.sites[t].splice(n,1,r)}},{key:\"Deletesite\",value:function(t,e,r){var n=this.sites[t].findIndex(function(t){return t[0]==e});-1!=n&&this.sites[t].splice(n,1),r(n)}},{key:\"Safesite\",value:function(t,e,r){return t.url=r,t.target=e,\"\"==t.name&&(t.name=\"tempread::\"),(!t.avatar||0==t.avatar.length)&&(t.avatar=[{name:\"\"},{url:\"\"}]),(!t.paging||0==t.paging.length)&&(t.paging=[{prev:\"\"},{next:\"\"}]),t}},{key:\"Cleansite\",value:function(t){return delete t.url,delete t.html,delete t.target,delete t.matching,t.avatar&&t.avatar.length>0&&\"\"==t.avatar[0].name&&delete t.avatar,t.paging&&t.paging.length>0&&\"\"==t.paging[0].prev&&delete t.paging,t}},{key:\"Formatsites\",value:function(t){var e=new Map,r=!0,n=!1,i=void 0;try{for(var a,l=t.sites[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(0==O(u)){var s=u.url;delete u.url,e.set(s,u)}}}catch(t){n=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw i}}return[].concat(o(e))}},{key:\"Clearsites\",value:function(t){t?this.sites[t]=[]:this.sites={global:[],custom:[],local:[]}}},{key:\"Origins\",value:function(t){var e=t.origins.map(function(t){return t.url});return(e=new Set(this.origins.concat(e))).forEach(function(t){\"\"!=t.trim()&&t.trim().startsWith(\"http\")&&t.trim().endsWith(\".json\")||e.delete(t)}),this.origins=[].concat(o(e)),this.origins}},{key:\"Addorigins\",value:function(t){return this.sites.custom=[].concat(o(t)),this.sites.custom}},{key:\"Clearorigins\",value:function(){var t=this.sites.custom.length;return this.sites.custom=[],t}}]),n}();function x(){var t=$(\"body\"),e=!0,r=!1,n=void 0;try{for(var i,a=[\"[itemprop='articleBody']\",\"article\",\".post-content\",\".entry-content\",\".post-article\",\".content-post\",\".article-entry\",\".article-content\",\".article-body\",\".markdown-body\",\".post\",\".content\"][Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,l=t.find(o);if(l.length>0)return l}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}return-1}function k(){var t=document.location,e=(t.href,t.host,t.protocol,t.host,t.protocol.substr(0,t.protocol.indexOf(\":\")),t.protocol,t.host,t.pathname.substr(0,t.pathname.lastIndexOf(\"/\")+1),new g.Readability(document.cloneNode(!0)).parse());return e}function _(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(t){var e=t.replace(\"www.\",\"\").match(/\\.\\S+\\.\\S+/g);return e?e[0].substr(1):t.replace(\"www.\",\"\")},a=u(b),s=[].concat(o(e.keys())),c=r.match(/[.a-zA-z0-9-_]+/g)[1].replace(\"www.\",\"\"),h=i(a.hostname),d=function(){return\"/\"==a.pathname||/\\/(default|index|portal).[0-9a-zA-Z]+$/.test(a.pathname)},f=!0,p=!1,m=void 0;try{for(var g,y=s[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){var w=g.value,x=e.get(w).name,$=i(x);w.startsWith(\"[[/\")&&w.endsWith(\"/]]\")&&new RegExp(w.replace(/^\\[\\[\\/|\\/\\]\\]/g,\"\")).test(location.href)?n.push([w,l(e.get(w)),t]):d()||w.endsWith(\"*\")||w.replace(/^http[s]?:/,\"\")!=r.replace(/^http[s]?:/,\"\")?w.match(/\\*/g)&&1==w.match(/\\*/g).length&&!d()&&w.endsWith(\"*\")&&c.includes($)&&h==$&&r.includes(x)?n.push([w,l(e.get(w)),t]):v(a.origin+a.pathname,w)&&n.push([w,l(e.get(w)),t]):n.push([w,l(e.get(w)),t])}}catch(t){p=!0,m=t}finally{try{!f&&y.return&&y.return()}finally{if(p)throw m}}}function O(t){if(!t.name||!t.url||!t.include)return-1;if(-1==s(t.title)[0]||-1==s(t.include)[0]||-1==s(t.desc)[0])return-2;if(t.paging){if(2!=t.paging.length)return-3;if(!t.paging[0].prev)return-4;if(!t.paging[1].next)return-5;if(-1==s(t.paging[0].prev)[0]||-1==s(t.paging[1].next)[0])return-6}if(t.avatar){if(2!=t.avatar.length)return-7;if(!t.avatar[0].name)return-8;if(!t.avatar[1].url)return-9;if(-1==s(t.avatar[0].name)[0]||-1==s(t.avatar[1].url)[0])return-10}return 0}function j(t){var e=t.replace('<div id=\"readability-page-1\" class=\"page\">',\"\"),r=$(e)[0],n=r.outerHTML.replace(r.innerHTML,\"\"),i=$(n)[0],a=i.tagName.toLowerCase(),o=i.className;return{id:i.id,cls:o,tag:a}}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"text\",r=$(\"html\");if(h(t)){var n=d(t),i=a(n,2),o=i[0],l=i[1];0==l?t=o:3==l?t=M(r.find(o)):4==l&&(t=o.html())}else\"html\"==e?t=M(r.find(t)):\"multi\"==e||(t=r.find(t).text().trim());return t}function M(t){var e=\"\";switch(t.length){case 0:e=\"<sr-rd-content-error></sr-rd-content-error>\";break;case 1:e=t.html().trim();break;default:e=t.map(function(t,e){return $(e).html()}).get().join(\"<br>\")}return e}return function(r){function o(e){t(this,o);var r=i(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return r.version=\"0.0.4 build 0111\",r.org_url=location.href,r.html={},r.plugin={},r.pure=!1,r.cleanup=!1,r}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,w),e(o,[{key:\"Exist\",value:function(){return this.org_url==location.href}},{key:\"AddPlugin\",value:function(t){this.plugin={minimatch:t.minimatch,pangu:t.pangu,beautify:t.beautify,stylesheet:t.style,rdability:t.rdability,markdown:t.markdown},n(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),\"SetMinimatch\",this).call(this,this.plugin.minimatch),n(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),\"SetRdability\",this).call(this,this.plugin.rdability),n(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),\"SetMarkdown\",this).call(this,this.plugin.markdown)}},{key:\"ReadMode\",value:function(){var t,e,r,n,i;this.html=(t=this.current.site,e=l(t),r=c(\"\"==t.title?\"<title>\":t.title),n=c(t.desc),i=c(t.include),e.title=\"\"==t.title||\"<title>\"==t.title?$(\"head title\").text():S(r),e.desc=function(t){if(void 0==t)return t;var e=t.length,r=t.indexOf(\"\")+1;return e>100&&(t=r>0?t.substr(0,r):t.substr(0,101)+\"......\"),t}(t.excerpt?t.excerpt:S(n)),e.include=\"\"==t.include&&\"\"!=t.html?t.html:S(i,\"html\"),e.avatar&&e.avatar.length>0&&\"\"==e.avatar[0].name&&delete e.avatar,e.paging&&e.paging.length>0&&\"\"==e.paging[0].prev&&delete e.paging,e.avatar&&e.avatar.forEach(function(t){var e=Object.keys(t).join(),r=t[e];t[e]=S(c(r),\"html\")}),e.paging&&e.paging.forEach(function(t){var e=Object.keys(t).join(),r=t[e];t[e]=S(c(r))}),e)}},{key:\"TempMode\",value:function(t,e){this.state=\"temp\",this.dom=e,this.Newsite(t,e.outerHTML)}},{key:\"GetDom\",value:function(t,e){return S(c(t),e)}},{key:\"Include\",value:function(){var t=this.current.site.include,e=[],r=c(t);try{if(h(r)){var n=d(t),i=a(n,2),o=i[0],l=i[1];0==l?(t=t.replace(/\\[\\[{\\$\\(|}\\]\\]|\\).html\\(\\)/g,\"\"),e=$(d(\"[[[\"+t+\"]]]\")[0])):3==l&&(e=o)}else r&&(e=$(\"body\").find(r))}catch(t){}return e}},{key:\"Exclude\",value:function(t){return function(t,e){var r=[],n=\"\",i=!0,o=!1,l=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var f=u.value;if(h(f)){var p=d(f),m=a(p,2),v=m[0],g=m[1];if(1==g)n=v;else if(2==g){var y=t.html().match(new RegExp(v,\"g\"));if(y&&y.length>0){var b=y.join(\"\");n=\"*[\"+b+\"]\"}else n=void 0}else 3==g?v.remove():4==g&&v.remove()}else n=c(f);n&&r.push(n)}}catch(t){o=!0,l=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw l}}return r.join(\",\")}(t,this.current.site.exclude)}},{key:\"Beautify\",value:function(t){0!=t.children().length&&this.plugin.beautify&&(this.plugin.beautify.before(this.current.site.name,t),this.cleanup&&this.plugin.beautify.cleanHTML(t,this.pure,this.isMathJax()),this.plugin.beautify.specbeautify(this.current.site.name,t),this.plugin.beautify.removeSpareTag(this.current.site.name,t),this.plugin.beautify.htmlbeautify(t),this.plugin.beautify.commbeautify(this.current.site.name,t))}},{key:\"Format\",value:function(t){this.plugin.pangu&&this.plugin.pangu.spacingElementByClassName(t)}},{key:\"Utils\",value:function(){return{dom2Xpath:f,xPath2Dom:p}}}]),o}()});\n\n\n\n// WEBPACK FOOTER //\n// ./src/vender/puread/puread.min.js"],"sourceRoot":""}